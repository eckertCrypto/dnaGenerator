(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{261:function(t,e,n){var content=n(274);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(84).default)("7fd6affa",content,!0,{sourceMap:!1})},267:function(t,e,n){var content=n(285);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(84).default)("75f27bfe",content,!0,{sourceMap:!1})},273:function(t,e,n){"use strict";n(261)},274:function(t,e,n){(e=n(83)(!1)).push([t.i,"",""]),t.exports=e},284:function(t,e,n){"use strict";n(267)},285:function(t,e,n){(e=n(83)(!1)).push([t.i,"pre[data-v-7355c363]{background-color:#e0e0e0}",""]),t.exports=e},286:function(t,e,n){"use strict";n.r(e);var o={props:["defaultData"],data:function(){return{show:!1}}},r=(n(273),n(56)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-dropdown",{staticClass:"mt-2 ml-auto",attrs:{id:"dropdown-1",text:"Settings",right:""}},[n("b-row",{staticClass:"px-4 pt-2 pb-0",staticStyle:{width:"22rem"}},[n("b-col",{attrs:{cols:"12"}},[n("b-form-group",{attrs:{"label-cols":"7","content-cols":"5",label:"Auto-Save"}},[n("b-form-checkbox",{staticClass:"mt-2",attrs:{switch:""},model:{value:t.defaultData.autoSave,callback:function(e){t.$set(t.defaultData,"autoSave",e)},expression:"defaultData.autoSave"}})],1)],1),t._v(" "),n("b-col",{attrs:{cols:"12"}},[n("b-form-group",{attrs:{"label-cols":"7","content-cols":"5",label:"Swap Chance (0-1)","content-class":"my-auto"}},[n("b-input",{attrs:{type:"number"},model:{value:t.defaultData.swapChance,callback:function(e){t.$set(t.defaultData,"swapChance",e)},expression:"defaultData.swapChance"}})],1)],1),t._v(" "),n("b-col",{attrs:{cols:"12"}},[n("b-form-group",{attrs:{"label-cols":"7","content-cols":"5",label:"Mutate Chance (0-1)"}},[n("b-input",{attrs:{type:"number"},model:{value:t.defaultData.mutateChance,callback:function(e){t.$set(t.defaultData,"mutateChance",e)},expression:"defaultData.mutateChance"}})],1)],1)],1)],1)}),[],!1,null,"6e07c293",null);e.default=component.exports},287:function(t,e,n){"use strict";n.r(e);n(3),n(8),n(28),n(6),n(23),n(20),n(52),n(9),n(67),n(198);var o,r=n(10),l=(n(66),n(26)),c={props:["dataName","dataKey","defaultData","tag"],data:function(){return{dataList:[],exportDataList:[],importFile:null,importFileContent:""}},watch:{importFile:(o=Object(l.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.importFile.text();case 2:this.importFileContent=t.sent;case 3:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},created:function(){var t=this.$db.loadListDataFromCookies(this.dataKey);t?this.dataList=t:this.loadListData(this.defaultData)},methods:{addData:function(){var t=this.dataList.reduce((function(t,e){return Math.max(t,e.id)}),-1);this.dataList.push({id:t+1}),console.log("new data",t+1),this.saveListData()},removeData:function(t){this.$db.removeItem(this.dataKey,t),this.dataList=this.dataList.filter((function(data){return data.id!=t})),this.saveListData()},removeAllData:function(){var t=this;Object(r.a)(this.dataList).forEach((function(a){return t.removeData(a.id)}))},showExportDataModal:function(){var t=this,data=this.dataList.map((function(data){return t.loadData(data.id)}));this.exportDataList=data,this.$refs["export-modal"].show()},downloadExportData:function(){var t=this,data=this.dataList.map((function(data){return t.loadData(data.id)}));this.downloadJson(data,this.dataKey+".json")},downloadJson:function(content){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"test.json",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json";"string"!=typeof content&&(content=JSON.stringify(content,null,2));var a=document.createElement("a"),n=new Blob([content],{type:e});a.href=URL.createObjectURL(n),a.download=t,a.click()},showImportDataModal:function(){this.$refs["import-modal"].show()},importData:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,t.importFile.text();case 3:return e.t1=e.sent,data=e.t0.parse.call(e.t0,e.t1),t.removeAllData(),e.next=8,t.$nextTick();case 8:t.loadListData(data),t.$refs["import-modal"].hide();case 10:case"end":return e.stop()}}),e)})))()},saveListData:function(){this.$db.saveList(this.dataKey,this.dataList)},loadListData:function(t){var e=this;t.forEach((function(t){return e.saveData(t.id,t)})),this.dataList=t.map((function(t){return{id:t.id}})),this.saveListData()},saveAllData:function(){this.saveListData();var slot=this.$scopedSlots.default();if(slot&&slot.length){var t=slot[0].context.$refs;for(var e in t)if(Object.hasOwnProperty.call(t,e)&&0==e.indexOf("data-"+this.dataKey+"-")){var n=t[e];n&&n.saveData&&n.saveData()}}},saveData:function(t,data){this.$db.saveItem(this.dataKey,t,data)},loadData:function(t){return this.$db.loadItemDataFromCookies(this.dataKey,t)}}},d=(n(284),n(56)),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-row",{staticClass:"mt-3"},[n("b-col",{attrs:{cols:"auto"}},[n("b-button",{staticClass:"mb-2",on:{click:t.addData}},[t._v("Add "+t._s(t.dataName))])],1),t._v(" "),n("b-col",{staticClass:"ml-auto",attrs:{cols:"auto"}},[t.$defaultData.autoSave?t._e():n("b-button",{staticClass:"mb-2",on:{click:t.saveAllData}},[t._v("Save all "+t._s(t.dataName)+"'s")])],1),t._v(" "),n("b-col",{attrs:{cols:"auto"}},[n("b-button",{staticClass:"mb-2",attrs:{variant:"outline-secondary"},on:{click:t.showExportDataModal}},[t._v("Export "+t._s(t.dataName))])],1),t._v(" "),n("b-col",{attrs:{cols:"auto"}},[n("b-button",{staticClass:"mb-2",attrs:{variant:"outline-secondary"},on:{click:t.showImportDataModal}},[t._v("Import "+t._s(t.dataName))])],1)],1),t._v(" "),t._l(t.dataList,(function(data){return n("b-row",{key:data.id},[n("b-col",{attrs:{cols:"12"}},[t._t("default",null,{dataId:data.id,value:t.loadData(data.id),save:function(data){return t.saveData(data.id,data)},remove:function(){return t.removeData(data.id)},refName:"data-"+t.dataKey+"-"+data.id})],2)],1)})),t._v(" "),n("b-modal",{ref:"export-modal",attrs:{"hide-footer":"",title:"Export "+t.dataName}},[n("div",{staticClass:"d-block text-center mb-2"},[n("h3",[t._v("Copy or download this code")]),t._v(" "),n("b-button",{on:{click:function(e){return t.downloadExportData()}}},[t._v("Download")])],1),t._v(" "),n("pre",[t._v(t._s(JSON.stringify(t.exportDataList,null,2)))])]),t._v(" "),n("b-modal",{ref:"import-modal",attrs:{"hide-footer":"",title:"Import "+t.dataName}},[n("div",{staticClass:"d-block text-center mb-2"},[n("b-form-file",{attrs:{accept:".json, .txt",state:Boolean(t.importFile),placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here..."},model:{value:t.importFile,callback:function(e){t.importFile=e},expression:"importFile"}}),t._v(" "),n("b-button",{staticClass:"mt-2",attrs:{disabled:!t.importFile,variant:"primary"},on:{click:function(e){return t.importData()}}},[t._v("Import")])],1),t._v(" "),t.importFileContent?n("pre",[t._v(t._s(t.importFileContent))]):t._e()])],2)}),[],!1,null,"7355c363",null);e.default=component.exports},288:function(t,e,n){"use strict";n.r(e);n(8),n(6),n(24),n(51),n(9);var o={props:["dataId","traits","population","value"],data:function(){return{chartOptions:{hoverBorderWidth:20,legend:{display:!1}}}},computed:{visible:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},chartData:function(){var t=this;if(!this.traits.length)return{};var e={};return Object.keys(this.population).forEach((function(n){var o=t.population[n].map((function(a){return a.name})),r=t.population[n].map((function(a){return 100*a.chance}));e[n]={labels:o,datasets:[{label:n,backgroundColor:t.$toColors(o),data:r}]}})),e}}},r=n(56),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-row",[n("b-col",[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"population"+t.dataId,expression:"'population' + dataId"}],attrs:{variant:"primary"}},[t._v("\n      "+t._s(t.visible?"Hide":"Show")+" Population\n    ")])],1),t._v(" "),n("b-collapse",{staticClass:"mt-2 col-12",attrs:{id:"population"+t.dataId},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("b-row",t._l(t.traits,(function(e){return n("b-col",{key:e.id,attrs:{cols:"4"}},[n("h5",[t._v(t._s(e.traitName))]),t._v(" "),n("PieDiagram",{attrs:{chartData:t.chartData[e.traitName],options:t.chartOptions}})],1)})),1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{PieDiagram:n(455).default})},289:function(t,e,n){var content=n(457);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(84).default)("547c888b",content,!0,{sourceMap:!1})},452:function(t,e,n){var content=n(535);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(84).default)("0da0b9d2",content,!0,{sourceMap:!1})},453:function(t,e,n){var content=n(537);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(84).default)("32cf8f17",content,!0,{sourceMap:!1})},455:function(t,e,n){"use strict";n.r(e);var o=n(550),r=o.b.reactiveProp,l={extends:o.a,mixins:[r],props:["options"],mounted:function(){this.renderChart(this.chartData,this.options)}},c=n(56),component=Object(c.a)(l,void 0,void 0,!1,null,null,null);e.default=component.exports},456:function(t,e,n){"use strict";n(289)},457:function(t,e,n){(e=n(83)(!1)).push([t.i,".card{background-color:hsla(0,0%,58%,.37647)}",""]),t.exports=e},462:function(t,e){},468:function(t,e){},475:function(t,e){},477:function(t,e){},489:function(t,e){},491:function(t,e){},507:function(t,e){},508:function(t,e){},533:function(t,e,n){var map={"./af":317,"./af.js":317,"./ar":318,"./ar-dz":319,"./ar-dz.js":319,"./ar-kw":320,"./ar-kw.js":320,"./ar-ly":321,"./ar-ly.js":321,"./ar-ma":322,"./ar-ma.js":322,"./ar-sa":323,"./ar-sa.js":323,"./ar-tn":324,"./ar-tn.js":324,"./ar.js":318,"./az":325,"./az.js":325,"./be":326,"./be.js":326,"./bg":327,"./bg.js":327,"./bm":328,"./bm.js":328,"./bn":329,"./bn-bd":330,"./bn-bd.js":330,"./bn.js":329,"./bo":331,"./bo.js":331,"./br":332,"./br.js":332,"./bs":333,"./bs.js":333,"./ca":334,"./ca.js":334,"./cs":335,"./cs.js":335,"./cv":336,"./cv.js":336,"./cy":337,"./cy.js":337,"./da":338,"./da.js":338,"./de":339,"./de-at":340,"./de-at.js":340,"./de-ch":341,"./de-ch.js":341,"./de.js":339,"./dv":342,"./dv.js":342,"./el":343,"./el.js":343,"./en-au":344,"./en-au.js":344,"./en-ca":345,"./en-ca.js":345,"./en-gb":346,"./en-gb.js":346,"./en-ie":347,"./en-ie.js":347,"./en-il":348,"./en-il.js":348,"./en-in":349,"./en-in.js":349,"./en-nz":350,"./en-nz.js":350,"./en-sg":351,"./en-sg.js":351,"./eo":352,"./eo.js":352,"./es":353,"./es-do":354,"./es-do.js":354,"./es-mx":355,"./es-mx.js":355,"./es-us":356,"./es-us.js":356,"./es.js":353,"./et":357,"./et.js":357,"./eu":358,"./eu.js":358,"./fa":359,"./fa.js":359,"./fi":360,"./fi.js":360,"./fil":361,"./fil.js":361,"./fo":362,"./fo.js":362,"./fr":363,"./fr-ca":364,"./fr-ca.js":364,"./fr-ch":365,"./fr-ch.js":365,"./fr.js":363,"./fy":366,"./fy.js":366,"./ga":367,"./ga.js":367,"./gd":368,"./gd.js":368,"./gl":369,"./gl.js":369,"./gom-deva":370,"./gom-deva.js":370,"./gom-latn":371,"./gom-latn.js":371,"./gu":372,"./gu.js":372,"./he":373,"./he.js":373,"./hi":374,"./hi.js":374,"./hr":375,"./hr.js":375,"./hu":376,"./hu.js":376,"./hy-am":377,"./hy-am.js":377,"./id":378,"./id.js":378,"./is":379,"./is.js":379,"./it":380,"./it-ch":381,"./it-ch.js":381,"./it.js":380,"./ja":382,"./ja.js":382,"./jv":383,"./jv.js":383,"./ka":384,"./ka.js":384,"./kk":385,"./kk.js":385,"./km":386,"./km.js":386,"./kn":387,"./kn.js":387,"./ko":388,"./ko.js":388,"./ku":389,"./ku.js":389,"./ky":390,"./ky.js":390,"./lb":391,"./lb.js":391,"./lo":392,"./lo.js":392,"./lt":393,"./lt.js":393,"./lv":394,"./lv.js":394,"./me":395,"./me.js":395,"./mi":396,"./mi.js":396,"./mk":397,"./mk.js":397,"./ml":398,"./ml.js":398,"./mn":399,"./mn.js":399,"./mr":400,"./mr.js":400,"./ms":401,"./ms-my":402,"./ms-my.js":402,"./ms.js":401,"./mt":403,"./mt.js":403,"./my":404,"./my.js":404,"./nb":405,"./nb.js":405,"./ne":406,"./ne.js":406,"./nl":407,"./nl-be":408,"./nl-be.js":408,"./nl.js":407,"./nn":409,"./nn.js":409,"./oc-lnc":410,"./oc-lnc.js":410,"./pa-in":411,"./pa-in.js":411,"./pl":412,"./pl.js":412,"./pt":413,"./pt-br":414,"./pt-br.js":414,"./pt.js":413,"./ro":415,"./ro.js":415,"./ru":416,"./ru.js":416,"./sd":417,"./sd.js":417,"./se":418,"./se.js":418,"./si":419,"./si.js":419,"./sk":420,"./sk.js":420,"./sl":421,"./sl.js":421,"./sq":422,"./sq.js":422,"./sr":423,"./sr-cyrl":424,"./sr-cyrl.js":424,"./sr.js":423,"./ss":425,"./ss.js":425,"./sv":426,"./sv.js":426,"./sw":427,"./sw.js":427,"./ta":428,"./ta.js":428,"./te":429,"./te.js":429,"./tet":430,"./tet.js":430,"./tg":431,"./tg.js":431,"./th":432,"./th.js":432,"./tk":433,"./tk.js":433,"./tl-ph":434,"./tl-ph.js":434,"./tlh":435,"./tlh.js":435,"./tr":436,"./tr.js":436,"./tzl":437,"./tzl.js":437,"./tzm":438,"./tzm-latn":439,"./tzm-latn.js":439,"./tzm.js":438,"./ug-cn":440,"./ug-cn.js":440,"./uk":441,"./uk.js":441,"./ur":442,"./ur.js":442,"./uz":443,"./uz-latn":444,"./uz-latn.js":444,"./uz.js":443,"./vi":445,"./vi.js":445,"./x-pseudo":446,"./x-pseudo.js":446,"./yo":447,"./yo.js":447,"./zh-cn":448,"./zh-cn.js":448,"./zh-hk":449,"./zh-hk.js":449,"./zh-mo":450,"./zh-mo.js":450,"./zh-tw":451,"./zh-tw.js":451};function o(t){var e=r(t);return n(e)}function r(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}o.keys=function(){return Object.keys(map)},o.resolve=r,t.exports=o,o.id=533},534:function(t,e,n){"use strict";n(452)},535:function(t,e,n){(e=n(83)(!1)).push([t.i,".small-font[data-v-a39fd2f6]{font-size:.7rem}.full-sequence[data-v-a39fd2f6]{color:#616161;font-weight:400}.font-bold[data-v-a39fd2f6]{font-weight:500}",""]),t.exports=e},536:function(t,e,n){"use strict";n(453)},537:function(t,e,n){(e=n(83)(!1)).push([t.i,".text-bold[data-v-c7ba1a10]{font-weight:500}",""]),t.exports=e},540:function(t,e,n){"use strict";n.r(e);n(8),n(28),n(11),n(9);var o=n(0),r=n(10);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={props:["dataId","value","slug"],created:function(){var t=this.value;if(t)for(var e in t)Object.hasOwnProperty.call(t,e)&&(this[e]=t[e])},data:function(){return{visible:!0,traitName:"New Trait",baseSequences:[],mixSequences:[],matchings:{},startPopulation:{},sequenceName:""}},computed:{_saveData:function(){return{id:this.dataId,visible:this.visible,traitName:this.traitName,baseSequences:this.baseSequences,mixSequences:this.mixSequences,matchings:this.matchings,startPopulation:this.startPopulation}},baseSequencesSorted:function(){return this.baseSequences.sort()},mixSequencesSorted:function(){return this.mixSequences.sort()},allSequences:function(){return[{label:"Base",options:Object(r.a)(this.baseSequencesSorted)},{label:"Mix",options:Object(r.a)(this.mixSequencesSorted)}]}},methods:{removeTrait:function(){var t=this;this.$bvModal.msgBoxConfirm("Are you sure?").then((function(e){console.log("remove",e),e&&t.$emit("remove")})).catch((function(t){}))},clearData:function(){this.baseSequences=[],this.mixSequences=[],this.matchings={},this.startPopulation={}},saveData:function(){this.$emit("save",this._saveData),console.log("save trait",this._saveData)},addBaseSequence:function(){var t=this;if(this.sequenceName){if(this.baseSequences.indexOf(this.sequenceName)>-1)return void alert("Sequence already added");var e=[];this.baseSequences.forEach((function(a){e.push(t.toKey(a,t.sequenceName))}));var n={};e.forEach((function(e){return n[e]=t.sequenceName}));var r={};e.forEach((function(t){return r[t]=0})),this.matchings=c(c(c({},this.matchings),n),{},Object(o.a)({},this.toKey(this.sequenceName,this.sequenceName),this.sequenceName)),this.startPopulation=c(c(c({},this.startPopulation),r),{},Object(o.a)({},this.toKey(this.sequenceName,this.sequenceName),0)),this.baseSequences.push(this.sequenceName),this.sequenceName=""}else alert("please enter a name")},addMixSequence:function(){if(this.sequenceName){if(this.mixSequences.indexOf(this.sequenceName)>-1)return void alert("Sequence already added");this.mixSequences.push(this.sequenceName),this.sequenceName=""}else alert("please enter a name")},toKey:function(t,e){return[t,e].sort().join("--")}},watch:{_saveData:{handler:function(t,e){console.log("trait changed"),this.$defaultData.autoSave&&this.saveData()},deep:!0}}},h=n(56),component=Object(h.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-row",{staticClass:"mt-4"},[n("b-col",{attrs:{cols:"auto"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"trait"+t.dataId,expression:"'trait' + dataId"}],attrs:{variant:"outline-primary"}},[t._v(t._s(t.visible?"Hide":"Show")+" Trait #"+t._s(t.dataId)+" -\n      "+t._s(t.traitName))])],1),t._v(" "),n("b-col",{staticClass:"ml-auto",attrs:{cols:"auto"}},[n("b-button",{attrs:{variant:"outline-secondary"},on:{click:t.removeTrait}},[t._v("Remove Trait #"+t._s(t.dataId))])],1),t._v(" "),n("b-collapse",{staticClass:"mt-2 col-12",attrs:{id:"trait"+t.dataId},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("b-card",[n("b-row",{staticClass:"mb-2"},[n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{"label-cols":"auto","content-cols":"",label:"Trait name: ","label-for":"input-horizontal"}},[n("b-input",{model:{value:t.traitName,callback:function(e){t.traitName=e},expression:"traitName"}})],1)],1),t._v(" "),n("b-col",{staticClass:"ml-auto",attrs:{cols:"auto"}},[t.$defaultData.autoSave?t._e():n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.saveData}},[t._v("Save")]),t._v(" "),n("b-button",{attrs:{variant:"outline-secondary"},on:{click:t.clearData}},[t._v("Clear Trait")])],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"2"}},[n("b-input",{model:{value:t.sequenceName,callback:function(e){t.sequenceName=e},expression:"sequenceName"}})],1),t._v(" "),n("b-col",{attrs:{cols:"auto"}},[n("b-button",{on:{click:t.addBaseSequence}},[t._v("Add base sequence")])],1),t._v(" "),n("b-col",{attrs:{cols:"auto"}},[n("b-button",{on:{click:t.addMixSequence}},[t._v("Add mix sequence")])],1)],1),t._v(" "),n("div",[n("b-table-simple",{attrs:{hover:"",small:"","caption-top":"",responsive:""}},[n("caption",[t._v("\n            Sequence matching and start population:\n          ")]),t._v(" "),n("b-thead",{attrs:{"head-variant":"dark"}},[n("b-tr",[n("b-th"),t._v(" "),t._l(t.baseSequencesSorted,(function(e){return n("b-th",{key:e+"-th"},[t._v("\n                "+t._s(e)+"\n              ")])}))],2)],1),t._v(" "),n("b-tbody",t._l(t.baseSequencesSorted,(function(e){return n("b-tr",{key:e+"-tr"},[n("b-th",{staticClass:"bg-dark text-light"},[t._v("\n                "+t._s(e)+"\n              ")]),t._v(" "),t._l(t.baseSequencesSorted,(function(o){return n("b-td",{key:o+"-td-"+e},[e<o?n("b-select",{attrs:{options:t.allSequences},model:{value:t.matchings[t.toKey(e,o)],callback:function(n){t.$set(t.matchings,t.toKey(e,o),n)},expression:"matchings[toKey(baseSequence, baseSequence2)]"}}):t._e(),t._v(" "),e==o?n("b-select",{attrs:{disabled:"",options:t.allSequences},model:{value:t.matchings[t.toKey(e,o)],callback:function(n){t.$set(t.matchings,t.toKey(e,o),n)},expression:"matchings[toKey(baseSequence, baseSequence2)]"}}):t._e(),t._v(" "),e<=o?n("b-input",{attrs:{type:"number"},model:{value:t.startPopulation[t.toKey(e,o)],callback:function(n){t.$set(t.startPopulation,t.toKey(e,o),n)},expression:"\n                    startPopulation[toKey(baseSequence, baseSequence2)]\n                  "}}):t._e()],1)}))],2)})),1),t._v(" "),n("b-tfoot",[n("b-tr",[n("b-td",{staticClass:"text-right",attrs:{colspan:"7",variant:"secondary"}},[t._v("\n                Base Sequences:\n                "),n("b",{staticClass:"mr-4"},[t._v(t._s(t.baseSequences.length))]),t._v(" Mix Sequences:\n                "),n("b",[t._v(t._s(t.mixSequences.length))])])],1)],1)],1)],1),t._v(" "),n("TraitPopulation",{attrs:{dataId:t.dataId,startPopulation:t.startPopulation,matchings:t.matchings}})],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{TraitPopulation:n(547).default})},541:function(t,e,n){"use strict";n.r(e);n(8),n(6),n(51),n(9);var o={props:["dataId","value","slug"],data:function(){return{visible:!1,dataName:"New Dna",traits:[],selection:{}}},created:function(){var t=this.$db.loadAllDataFromCookies(this.slug+"-trait"),e={};t.forEach((function(t){e[t.id]=null,e[t.id+"_1"]=null,e[t.id+"_2"]=null,e[t.id+"_3"]=null}));var n=this.value;if(n)for(var o in n)Object.hasOwnProperty.call(n,o)&&(this[o]=n[o]);for(var r in this.selection)if(Object.hasOwnProperty.call(this.selection,r)){var element=this.selection[r];void 0!==e[r]&&(e[r]=element)}this.selection=e,this.traits=t,console.log(this._saveData)},methods:{saveData:function(){console.log(this._saveData),this.$emit("save",this._saveData)},removeData:function(){var t=this;this.$bvModal.msgBoxConfirm("Are you sure?").then((function(e){console.log("remove",e),e&&t.$emit("remove")})).catch((function(t){}))},getSelectableSequences:function(t){return Object.keys(t.matchings).sort((function(a,b){return t.matchings[a].localeCompare(t.matchings[b])})).map((function(e){return{value:e,text:t.matchings[e]+" ("+e+")"}}))}},computed:{_saveData:function(){return{id:this.dataId,visible:this.visible,dataName:this.dataName,selection:this.selection}}},watch:{_saveData:{handler:function(t,e){console.log("trait changed"),this.$defaultData.autoSave&&this.saveData()},deep:!0}}},r=n(56),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-row",{staticClass:"mt-4"},[n("b-col",{attrs:{cols:"auto"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"dna"+t.dataId,expression:"'dna' + dataId"}],attrs:{variant:"outline-primary"}},[t._v(t._s(t.visible?"Hide":"Show")+" DNA #"+t._s(t.dataId)+" -\n      "+t._s(t.dataName))])],1),t._v(" "),n("b-col",{staticClass:"ml-auto",attrs:{cols:"auto"}},[n("b-button",{attrs:{variant:"outline-secondary"},on:{click:t.removeData}},[t._v("\n      Remove DNA #"+t._s(t.dataId)+"\n    ")])],1),t._v(" "),n("b-collapse",{staticClass:"mt-2 col-12",attrs:{id:"dna"+t.dataId},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("b-card",[n("b-row",{staticClass:"mb-2"},[n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{"label-cols":"auto","content-cols":"",label:"DNA name:","label-for":"input-horizontal"}},[n("b-input",{model:{value:t.dataName,callback:function(e){t.dataName=e},expression:"dataName"}})],1)],1),t._v(" "),n("b-col",{staticClass:"ml-auto",attrs:{cols:"auto"}},[t.$defaultData.autoSave?t._e():n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.saveData}},[t._v("\n            Save\n          ")])],1)],1),t._v(" "),n("b-row",t._l(t.traits,(function(e){return n("b-col",{key:e.id,attrs:{cols:"4"}},[n("b-form-group",{attrs:{"label-cols":"auto","content-cols":"",label:e.traitName,"label-for":"input-horizontal"}},[n("b-select",{staticClass:"border-primary",attrs:{id:"input-horizontal",options:t.getSelectableSequences(e)},model:{value:t.selection[e.id],callback:function(n){t.$set(t.selection,e.id,n)},expression:"selection[trait.id]"}}),t._v(" "),n("b-select",{attrs:{options:t.getSelectableSequences(e)},model:{value:t.selection[e.id+"_1"],callback:function(n){t.$set(t.selection,e.id+"_1",n)},expression:"selection[trait.id + '_1']"}}),t._v(" "),n("b-select",{attrs:{options:t.getSelectableSequences(e)},model:{value:t.selection[e.id+"_2"],callback:function(n){t.$set(t.selection,e.id+"_2",n)},expression:"selection[trait.id + '_2']"}}),t._v(" "),n("b-select",{attrs:{options:t.getSelectableSequences(e)},model:{value:t.selection[e.id+"_3"],callback:function(n){t.$set(t.selection,e.id+"_3",n)},expression:"selection[trait.id + '_3']"}})],1)],1)})),1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},542:function(t,e,n){"use strict";n.r(e);n(7),n(3),n(103),n(8),n(6),n(23),n(15),n(24),n(51),n(9);var o=n(10),r=n(0);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={props:["dataId","value","slug"],data:function(){return{dataKey:"dnaMixer",dataTitle:"DNA Mixer",visible:!1,childrenVisible:!1,populationVisible:!0,dataName:"New mixer",traits:[],dnas:[],selection:{parent1:null,parent2:null,dnaDepth:1},filterSelection:{},showDnaDetails:!1,currentPage:1,perPage:20}},created:function(){this.$dna.reload(this.slug),this.traits=this.$db.loadAllDataFromCookies(this.slug+"-trait"),this.dnas=this.$db.loadAllDataFromCookies(this.slug+"-dna");var t=this.value;if(t)for(var e in t)Object.hasOwnProperty.call(t,e)&&(this[e]=t[e]);console.log(this._saveData,this.dnas,this.traits)},methods:{saveData:function(){console.log(this._saveData),this.$emit("save",this._saveData)},removeData:function(){var t=this;this.$bvModal.msgBoxConfirm("Are you sure?").then((function(e){console.log("remove",e),e&&t.$emit("remove")})).catch((function(t){}))}},computed:{_saveData:function(){return{id:this.dataId,visible:this.visible,dataName:this.dataName,selection:this.selection,showDnaDetails:this.showDnaDetails,childrenVisible:this.childrenVisible,populationVisible:this.populationVisible}},selectableDnas:function(){return this.dnas.map((function(t){return{value:t.id,text:t.dataName}}))},parentsDnas:function(){var t=this;if(!this.visible||null===this.selection.parent1||null===this.selection.parent2)return null;var e=this.dnas.find((function(e){return e.id==t.selection.parent1})),n=this.dnas.find((function(e){return e.id==t.selection.parent2}));if(!e||!n)return null;console.log(e,n);var o={parent1:this.$dna.dnaDataToDna(e),parent2:this.$dna.dnaDataToDna(n)};return console.log("parentsDnas",o),o},possiblePopulation:function(){var t=this;if(!this.possibleChildrenDnas)return null;var e={},n=(new Date).getTime();return this.possibleChildrenDnas.traitsChances.forEach((function(n,o){var r=t.traits[o].traitName;void 0===e[r]&&(e[r]=[]),n.forEach((function(t){var n=t.traits[0],o=e[r].find((function(s){return s.name==n}));o?(o.count++,o.chance+=t.chance):e[r].push({name:n,count:1,chance:t.chance})}))})),console.log("possible population calculated in "+((new Date).getTime()-n)/1e3+" seconds",e),e},possibleFilter:function(){var t=this,e={},n=(new Date).getTime();this.possibleChildrenDnas.traitsChances.forEach((function(n,o){var r=t.traits[o].traitName;void 0===e[r]&&(e[r]=[]),n.forEach((function(t){var n=t.traits[0],o=e[r].find((function(s){return s.name==n}));o?o.count+=100*t.chance:e[r].push({name:n,count:100*t.chance})}))})),console.log("possible filter",e);var r={};return Object.keys(e).forEach((function(t){return r[t]=null})),this.filterSelection=c(c({},this.filterSelection),{},{filterSelection:r}),e=Object.keys(e).map((function(t){return{title:t,options:[{value:null,text:"all"}].concat(Object(o.a)(e[t].map((function(a){return{value:a.name,text:a.name+"("+a.count+" %)"}}))))}})),console.log("possible filtered dnas calculated in "+((new Date).getTime()-n)/1e3+" seconds",e),e},possibleChildrenDnasPaged:function(){if(!this.childrenVisible)return[];var t=(new Date).getTime(),e=(this.currentPage-1)*this.perPage,n=e+this.perPage,o=[];return o=this.possibleChildrenDnasFiltered.length>1e4?this.randomChildrenDnas:this.$dna.dnaChance.mergeTraits(this.possibleChildrenDnasFiltered.traitsChances).sort((function(a,b){return a.chance-b.chance})).slice(e,n),console.log("paged results calculated in "+((new Date).getTime()-t)/1e3+" seconds"),o},randomChildrenDnas:function(){if(!this.childrenVisible)return[];for(var t=(new Date).getTime(),e=(this.currentPage-1)*this.perPage,n=e+this.perPage,o=this.possibleChildrenDnasFiltered.length,r=Math.min(n,o-e),l=this.traits.length,c=this.traits.map((function(t){return 1})),i=0,d=1;d<r;){var h=c[i%=l];d=d/h*(h+1),c[i++]++}if(n<o-e){var f=this.possibleChildrenDnasFiltered.traitsChances.map((function(t,e){return t.slice(0,c[e])}));console.log("random start traitsChances calculated in "+((new Date).getTime()-t)/1e3+" seconds",f.reduce((function(t,e){return t*e.length}),1));var v=this.$dna.dnaChance.mergeTraits(f);return console.log("random start merged dnaChances calculated in "+((new Date).getTime()-t)/1e3+" seconds",v.length,e,n),v.sort((function(a,b){return a.chance-b.chance})).slice(e,n)}var m=this.possibleChildrenDnasFiltered.traitsChances.map((function(t,e){return t.slice(t.length-c[e],t.length)}));console.log("random end traitsChances calculated in "+((new Date).getTime()-t)/1e3+" seconds",m.reduce((function(t,e){return t*e.length}),1));var D=this.$dna.dnaChance.mergeTraits(m);console.log("random end merged dnaChances calculated in "+((new Date).getTime()-t)/1e3+" seconds",D.length,e,n);var _=o-D.length;return D.sort((function(a,b){return a.chance-b.chance})).slice(e-_,n-_)},filteredChance:function(){return 100*this.possibleChildrenDnasFiltered.traitsChances.reduce((function(p,t){return p*t.reduce((function(t,e){return t+e.chance}),0)}),1)},possibleChildrenDnasFiltered:function(){var t=this,e=this.possibleChildrenDnas.traitsChances,n=[],o=(new Date).getTime();return this.traits.forEach((function(o,r){var filter=t.filterSelection[o.traitName];filter?n.push(e[r].filter((function(t){return t.traits[0]==filter}))):n.push(e[r])})),console.log("possible filtered dnas calculated in "+((new Date).getTime()-o)/1e3+" seconds",n),{traitsChances:n,length:n.reduce((function(t,e){return t*e.length}),1)}},possibleChildrenDnas:function(){var t=this.parentsDnas;return this.visible&&t?this.$dna.parentsDnaToPossibleChildren(t.parent1,t.parent2,this.selection.dnaDepth,this.showDnaDetails):null}},watch:{_saveData:{handler:function(t,e){console.log("trait changed"),this.$defaultData.autoSave&&this.saveData()},deep:!0}}},h=n(56),component=Object(h.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-row",{staticClass:"mt-4"},[n("b-col",{attrs:{cols:"auto"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:t.dataKey+t.dataId,expression:"dataKey + dataId"}],attrs:{variant:"outline-primary"}},[t._v(t._s(t.visible?"Hide":"Show")+" "+t._s(t.dataTitle)+" #"+t._s(t.dataId)+" -\n      "+t._s(t.dataName))])],1),t._v(" "),n("b-col",{staticClass:"ml-auto",attrs:{cols:"auto"}},[n("b-button",{attrs:{variant:"outline-secondary"},on:{click:t.removeData}},[t._v("\n      Remove "+t._s(t.dataTitle)+" #"+t._s(t.dataId)+"\n    ")])],1),t._v(" "),n("b-collapse",{staticClass:"mt-2 col-12",attrs:{id:t.dataKey+t.dataId},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("b-card",[n("b-row",{staticClass:"mb-2"},[n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{"label-cols":"auto","content-cols":"",label:t.dataTitle+"name:","label-for":"input-horizontal"}},[n("b-input",{model:{value:t.dataName,callback:function(e){t.dataName=e},expression:"dataName"}})],1)],1),t._v(" "),n("b-col",{staticClass:"ml-auto",attrs:{cols:"auto"}},[t.$defaultData.autoSave?t._e():n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.saveData}},[t._v("\n            Save\n          ")])],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"3"}},[n("b-form-group",{attrs:{"label-cols":"auto","content-cols":"",label:"Parent1"}},[n("b-select",{attrs:{options:t.selectableDnas},model:{value:t.selection.parent1,callback:function(e){t.$set(t.selection,"parent1",e)},expression:"selection.parent1"}})],1)],1),t._v(" "),n("b-col",{attrs:{cols:"3"}},[n("b-form-group",{attrs:{"label-cols":"auto","content-cols":"",label:"Parent2"}},[n("b-select",{attrs:{options:t.selectableDnas},model:{value:t.selection.parent2,callback:function(e){t.$set(t.selection,"parent2",e)},expression:"selection.parent2"}})],1)],1),t._v(" "),n("b-col",{staticClass:"ml-auto",attrs:{cols:"3"}},[n("b-form-group",{attrs:{"label-cols":"auto","content-cols":"",label:"Dna Depth"}},[n("b-select",{attrs:{options:[1,2,3,4]},model:{value:t.selection.dnaDepth,callback:function(e){t.$set(t.selection,"dnaDepth",e)},expression:"selection.dnaDepth"}})],1)],1),t._v(" "),n("b-col",{attrs:{cols:"auto"}},[n("b-button",{on:{click:function(e){t.showDnaDetails=!t.showDnaDetails}}},[t._v(t._s(t.showDnaDetails?"Hide":"Show")+" Dna Details")])],1)],1),t._v(" "),t.parentsDnas?n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("h3",[t._v("Parents")])]),t._v(" "),n("b-col",{attrs:{cols:"6"}},[n("DnaView",{attrs:{dna:t.parentsDnas.parent1,traits:t.traits,dnaDepth:t.selection.dnaDepth,showDnaDetails:t.showDnaDetails}})],1),t._v(" "),n("b-col",{attrs:{cols:"6"}},[n("DnaView",{attrs:{dna:t.parentsDnas.parent2,traits:t.traits,dnaDepth:t.selection.dnaDepth,showDnaDetails:t.showDnaDetails}})],1)],1):t._e(),t._v(" "),t.parentsDnas&&t.possibleChildrenDnas?n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("h3",[t._v("\n            Children "+t._s(t.possibleChildrenDnas.length)+" ("+t._s(t.possibleChildrenDnasFiltered.length)+"\n            - "+t._s(t.filteredChance)+" %)\n          ")]),t._v(" "),n("b-pagination",{attrs:{"total-rows":t.possibleChildrenDnasFiltered.length,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),n("b-col",{attrs:{cols:"12"}},[n("b-row",t._l(t.possibleFilter,(function(filter,e){return n("b-col",{key:filter.title+e,attrs:{cols:"4"}},[n("b-form-group",{attrs:{"label-cols":"auto","content-cols":"",label:filter.title}},[n("b-select",{attrs:{options:filter.options},model:{value:t.filterSelection[filter.title],callback:function(e){t.$set(t.filterSelection,filter.title,e)},expression:"filterSelection[filter.title]"}})],1)],1)})),1),t._v(" "),n("b-row",[n("b-col",[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"dnaMixerChildren"+t.dataId,expression:"'dnaMixerChildren' + dataId"}],staticClass:"mb-2",attrs:{variant:"primary"}},[t._v("\n                "+t._s(t.childrenVisible?"Hide":"Show")+" Children\n              ")])],1),t._v(" "),n("b-collapse",{staticClass:"mt-2 col-12",attrs:{id:"dnaMixerChildren"+t.dataId},model:{value:t.childrenVisible,callback:function(e){t.childrenVisible=e},expression:"childrenVisible"}},[t.childrenVisible?n("b-row",t._l(t.possibleChildrenDnasPaged,(function(e){return n("b-col",{key:e.key,staticClass:"mb-2",attrs:{cols:"3"}},[n("DnaView",{attrs:{dna:e,traits:t.traits,dnaDepth:t.selection.dnaDepth,showDnaDetails:t.showDnaDetails}})],1)})),1):t._e()],1)],1)],1)],1):t._e(),t._v(" "),t.possiblePopulation?n("DnaMixerPopulation",{attrs:{dataId:t.dataId,traits:t.traits,population:t.possiblePopulation},model:{value:t.populationVisible,callback:function(e){t.populationVisible=e},expression:"populationVisible"}}):t._e()],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{DnaView:n(548).default,DnaMixerPopulation:n(288).default})},543:function(t,e,n){"use strict";n.r(e);n(3),n(103),n(144),n(8),n(6),n(23),n(145),n(24),n(9);var o={props:["dataId","value","slug"],data:function(){return{dataKey:"mutations",dataTitle:"Mutations",visible:!1,dataName:"New mutations",traits:[],dnas:[],mixers:[],selectedMixer:{},selectedMutationLevel:{},populationVisible:!0}},created:function(){var t=this;this.$dna.reload(this.slug),this.traits=this.$db.loadAllDataFromCookies(this.slug+"-trait"),this.dnas=this.$db.loadAllDataFromCookies(this.slug+"-dna"),this.mixers=this.$db.loadAllDataFromCookies(this.slug+"-dnaMixer");var e=this.value;if(e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(this[n]=e[n]);var o={};this.mixers.forEach((function(e){return o[e.id]=t.selectedMixer[e.id]||!1})),this.selectedMixer=o;var r={};this.traits.forEach((function(e){r[e.id]=e.baseSequences.reduce((function(p,t){return p[t]=p[t]||0,p}),t.selectedMutationLevel[e.id]||{})})),this.selectedMutationLevel=r,console.log(this._saveData)},methods:{saveData:function(){console.log(this._saveData),this.$emit("save",this._saveData)},removeData:function(){var t=this;this.$bvModal.msgBoxConfirm("Are you sure?").then((function(e){console.log("remove",e),e&&t.$emit("remove")})).catch((function(t){}))}},computed:{_saveData:function(){return{id:this.dataId,visible:this.visible,dataName:this.dataName,selectedMixer:this.selectedMixer,selectedMutationLevel:this.selectedMutationLevel,populationVisible:this.populationVisible}},parentsDnas:function(){var t=this;return this.mixers.filter((function(e){return t.selectedMixer[e.id]})).map((function(e){var n=t.dnas.find((function(t){return t.id==e.selection.parent1})),o=t.dnas.find((function(t){return t.id==e.selection.parent2}));return n&&o?{parent1:t.$dna.dnaDataToDna(n),parent2:t.$dna.dnaDataToDna(o)}:null})).filter((function(a){return null!=a}))},possibleChildrenDnas:function(){var t=this;return this.parentsDnas.map((function(e){return t.$dna.parentsDnaToPossibleChildren(e.parent1,e.parent2,1,!0)}))},possibleChildrenDnasWithMutation:function(){var t=this;return console.log("parents",this.possibleChildrenDnas,this.parentsDnas,this.selectedMutationLevel),this.possibleChildrenDnas.map((function(e){var n=e.traitsChances;return t.$dna.mutate(n,t.selectedMutationLevel)}))},traitsWithBaseSequences:function(){var t=this,e=this.possibleChildrenDnas.length;return this.traits.map((function(n,o){var r={trait:n,sequences:[]};return r.sequences=n.baseSequences.map((function(n){var r=t.possibleChildrenDnas.flatMap((function(t){return t.traitsChances[o]})).filter((function(t){return t.dna1[0]==n||t.dna2[0]==n})).reduce((function(t,n){return t.chance+=n.chance/e,t}),{name:n,chance:0});return r.chanceWithMutation=t.possibleChildrenDnasWithMutation.flatMap((function(t){return t[o]})).filter((function(t){return t.dna1[0]==n||t.dna2[0]==n})).reduce((function(t,n){return t+n.chance/e}),0),r})).sort((function(a,b){return b.chance-a.chance})),r}))},possiblePopulation:function(){var t=this;if(!this.visible)return null;var e={},n=(new Date).getTime(),o=this.possibleChildrenDnasWithMutation.length;return this.possibleChildrenDnasWithMutation.forEach((function(r){r.forEach((function(n,r){var l=t.traits[r].traitName;void 0===e[l]&&(e[l]=[]),n.forEach((function(t){var n=t.traits[0],r=e[l].find((function(s){return s.name==n}));r?(r.count++,r.chance+=t.chance/o):e[l].push({name:n,count:1,chance:t.chance/o})}))})),console.log("possible population calculated after "+((new Date).getTime()-n)/1e3+" seconds",e)})),e}},watch:{_saveData:{handler:function(t,e){console.log("trait changed"),this.$defaultData.autoSave&&this.saveData()},deep:!0}}},r=(n(536),n(56)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-row",{staticClass:"mt-4"},[n("b-col",{attrs:{cols:"auto"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:t.dataKey+t.dataId,expression:"dataKey + dataId"}],attrs:{variant:"outline-primary"}},[t._v(t._s(t.visible?"Hide":"Show")+" "+t._s(t.dataTitle)+" #"+t._s(t.dataId)+" -\n      "+t._s(t.dataName))])],1),t._v(" "),n("b-col",{staticClass:"ml-auto",attrs:{cols:"auto"}},[n("b-button",{attrs:{variant:"outline-secondary"},on:{click:t.removeData}},[t._v("\n      Remove "+t._s(t.dataTitle)+" #"+t._s(t.dataId)+"\n    ")])],1),t._v(" "),n("b-collapse",{staticClass:"mt-2 col-12",attrs:{id:t.dataKey+t.dataId},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("b-card",[n("b-row",{staticClass:"mb-2"},[n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{"label-cols":"auto","content-cols":"",label:t.dataTitle+"name:","label-for":"input-horizontal"}},[n("b-input",{model:{value:t.dataName,callback:function(e){t.dataName=e},expression:"dataName"}})],1)],1),t._v(" "),n("b-col",{staticClass:"ml-auto",attrs:{cols:"auto"}},[t.$defaultData.autoSave?t._e():n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.saveData}},[t._v("\n            Save\n          ")])],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"4"}},[n("h5",[t._v("Mixed Dna to sell")]),t._v(" "),t._l(t.mixers,(function(e){return n("b-row",{key:e.id},[n("b-col",{attrs:{cols:"12"}},[n("b-form-checkbox",{class:{"text-bold":t.selectedMixer[e.id]},attrs:{switch:""},model:{value:t.selectedMixer[e.id],callback:function(n){t.$set(t.selectedMixer,e.id,n)},expression:"selectedMixer[mixer.id]"}},[t._v("\n                "+t._s(e.dataName)+"\n              ")])],1)],1)}))],2),t._v(" "),n("b-col",{attrs:{cols:"8"}},[n("h5",[t._v("Mutation Levels")]),t._v(" "),n("div",{staticClass:"mb-3",staticStyle:{"font-weight":"500",opacity:"0.6"}},[t._v("\n            Base Sequences (with chance to be in active Trait) / m(chance with\n            mutations)\n          ")]),t._v(" "),t._l(t.traitsWithBaseSequences,(function(e){return n("b-row",{key:e.trait.id},[n("b-col",{attrs:{cols:"12"}},[n("h6",[t._v(t._s(e.trait.traitName))])]),t._v(" "),t._l(e.sequences,(function(o){return n("b-form-group",{key:e.trait.id+"_"+o.name,staticClass:"col-12 px-5 mb-1",attrs:{"label-cols":"8","content-cols":"4",label:o.name+" ("+Math.round(100*(o.chance+Number.EPSILON)*1e5)/1e5+" %) / m("+Math.round(100*(o.chanceWithMutation+Number.EPSILON)*1e5)/1e5+" %)"}},[n("b-input",{attrs:{type:"number"},model:{value:t.selectedMutationLevel[e.trait.id][o.name],callback:function(n){t.$set(t.selectedMutationLevel[e.trait.id],o.name,n)},expression:"selectedMutationLevel[trait.trait.id][sequence.name]"}})],1)}))],2)}))],2)],1),t._v(" "),t.possiblePopulation?n("DnaMixerPopulation",{staticClass:"mt-3",attrs:{dataId:t.dataId,traits:t.traits,population:t.possiblePopulation},model:{value:t.populationVisible,callback:function(e){t.populationVisible=e},expression:"populationVisible"}}):t._e()],1)],1)],1)}),[],!1,null,"c7ba1a10",null);e.default=component.exports;installComponents(component,{DnaMixerPopulation:n(288).default})},544:function(t,e,n){"use strict";n.r(e);n(3),n(103),n(8),n(6),n(23),n(24),n(9);var o={props:["dataId","value","slug"],data:function(){return{dataKey:"presale",dataTitle:"Presale",visible:!1,dataName:"New presale",traits:[],dnas:[],mixers:[],mutations:[],selectedMutationId:0,selectedSellCount:{},selectedPrices:{},populationVisible:!1}},created:function(){var t=this;this.$dna.reload(this.slug),this.traits=this.$db.loadAllDataFromCookies(this.slug+"-trait"),this.dnas=this.$db.loadAllDataFromCookies(this.slug+"-dna"),this.mixers=this.$db.loadAllDataFromCookies(this.slug+"-dnaMixer"),this.mutations=this.$db.loadAllDataFromCookies(this.slug+"-mutations");var e=this.value;if(e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(this[n]=e[n]);var o={};this.activeMixers.forEach((function(e){return o[e.id]=t.selectedSellCount[e.id]||0})),this.selectedSellCount=o;var r={};this.activeMixers.forEach((function(e){return r[e.id]=t.selectedPrices[e.id]||0})),this.selectedPrices=r,console.log(this._saveData)},methods:{saveData:function(){console.log(this._saveData),this.$emit("save",this._saveData)},removeData:function(){var t=this;this.$bvModal.msgBoxConfirm("Are you sure?").then((function(e){console.log("remove",e),e&&t.$emit("remove")})).catch((function(t){}))}},computed:{_saveData:function(){var t=this,e={},n={};return this.activeMixers&&(this.activeMixers.forEach((function(n){return e[n.id]=t.selectedSellCount[n.id]||0})),this.activeMixers.forEach((function(e){return n[e.id]=t.selectedPrices[e.id]||0}))),{id:this.dataId,visible:this.visible,dataName:this.dataName,selectedMutationId:this.selectedMutationId,selectedSellCount:e,selectedPrices:n,populationVisible:this.populationVisible}},mutationOptions:function(){return this.mutations.map((function(t){return{value:t.id,text:t.dataName}}))},selectedMutation:function(){var t=this;return this.mutations.find((function(e){return e.id==t.selectedMutationId}))},activeMixers:function(){var t=this;return this.selectedMutation?this.mixers.filter((function(e){return t.selectedMutation.selectedMixer[e.id]})):null},priceSum:function(){var t=this;return this.activeMixers&&0!=this.activeMixers.length?this.activeMixers.reduce((function(p,e){return p+parseFloat(t.selectedPrices[e.id]||0)*parseInt(t.selectedSellCount[e.id]||0)}),0):0},countSum:function(){var t=this;return this.activeMixers&&0!=this.activeMixers.length?this.activeMixers.reduce((function(p,e){return p+parseInt(t.selectedSellCount[e.id]||0)}),0):0},parentsDnas:function(){var t=this;return this.activeMixers?this.activeMixers.map((function(e){var n=t.dnas.find((function(t){return t.id==e.selection.parent1})),o=t.dnas.find((function(t){return t.id==e.selection.parent2}));return n&&o?{parent1:t.$dna.dnaDataToDna(n),parent2:t.$dna.dnaDataToDna(o)}:null})).filter((function(a){return null!=a})):null},possibleChildrenDnas:function(){var t=this,e=this.parentsDnas.map((function(e){return t.$dna.parentsDnaToPossibleChildren(e.parent1,e.parent2,1,!1)})),n=this.countSum;return e.map((function(e,o){var r=e.traitsChances;return{length:e.length,traitsChances:r,factor:parseInt(t.selectedSellCount[t.activeMixers[o].id])/n}}))},possibleChildrenDnasWithMutation:function(){var t=this;return this.possibleChildrenDnas.map((function(e){var n=e.traitsChances,o=e.factor;return function(e){var n=(e=t.$dna.mutate(e,t.selectedMutation.selectedMutationLevel)).reduce((function(t,e){return t*e.length}),1);return{traitsChances:e,factor:o,length:n}}(n)}))},possiblePopulation:function(){var t=this;if(!this.visible)return null;var e={},n=(new Date).getTime();this.possibleChildrenDnasWithMutation.length;return this.possibleChildrenDnasWithMutation.forEach((function(o,r){var l=o.traitsChances,c=o.factor;l.forEach((function(n,o){var r=t.traits[o].traitName;void 0===e[r]&&(e[r]=[]),n.forEach((function(t){var n=t.traits[0],o=e[r].find((function(s){return s.name==n}));o?o.chance+=t.chance*c:e[r].push({name:n,chance:t.chance*c})}))})),console.log("possible population calculated after "+((new Date).getTime()-n)/1e3+" seconds",e)})),e}},watch:{_saveData:{handler:function(t,e){this.$defaultData.autoSave&&this.saveData()},deep:!0}}},r=n(56),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-row",{staticClass:"mt-4"},[n("b-col",{attrs:{cols:"auto"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:t.dataKey+t.dataId,expression:"dataKey + dataId"}],attrs:{variant:"outline-primary"}},[t._v(t._s(t.visible?"Hide":"Show")+" "+t._s(t.dataTitle)+" #"+t._s(t.dataId)+" -\n      "+t._s(t.dataName))])],1),t._v(" "),n("b-col",{staticClass:"ml-auto",attrs:{cols:"auto"}},[n("b-button",{attrs:{variant:"outline-secondary"},on:{click:t.removeData}},[t._v("\n      Remove "+t._s(t.dataTitle)+" #"+t._s(t.dataId)+"\n    ")])],1),t._v(" "),n("b-collapse",{staticClass:"mt-2 col-12",attrs:{id:t.dataKey+t.dataId},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("b-card",[n("b-row",{staticClass:"mb-2"},[n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{"label-cols":"auto","content-cols":"",label:t.dataTitle+"name:","label-for":"input-horizontal"}},[n("b-input",{model:{value:t.dataName,callback:function(e){t.dataName=e},expression:"dataName"}})],1)],1),t._v(" "),n("b-col",{staticClass:"ml-auto",attrs:{cols:"auto"}},[t.$defaultData.autoSave?t._e():n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.saveData}},[t._v("\n            Save\n          ")])],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"4"}},[n("b-form-group",{attrs:{"label-cols":"auto","content-cols":"",label:"Mutation Options"}},[n("b-select",{attrs:{options:t.mutationOptions},model:{value:t.selectedMutationId,callback:function(e){t.selectedMutationId=e},expression:"selectedMutationId"}})],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"4"}},[n("h5",[t._v("Sell count")]),t._v(" "),t._l(t.activeMixers,(function(e){return n("b-form-group",{key:"count"+e.id,attrs:{"label-cols":"auto","content-cols":"",label:e.dataName}},[n("b-input",{attrs:{type:"number"},model:{value:t.selectedSellCount[e.id],callback:function(n){t.$set(t.selectedSellCount,e.id,n)},expression:"selectedSellCount[mixer.id]"}})],1)}))],2),t._v(" "),n("b-col",{attrs:{cols:"2"}},[n("h5",[t._v("Prices")]),t._v(" "),t._l(t.activeMixers,(function(e){return n("b-form-group",{key:"price"+e.id,attrs:{"label-cols":"4","content-cols":"8",label:650*parseFloat(t.selectedPrices[e.id])+"$"}},[n("b-input",{attrs:{type:"number"},model:{value:t.selectedPrices[e.id],callback:function(n){t.$set(t.selectedPrices,e.id,n)},expression:"selectedPrices[mixer.id]"}})],1)})),t._v(" "),n("h6",[t._v("= "+t._s(t.priceSum)+" ETH / "+t._s(650*t.priceSum)+"$")])],2)],1),t._v(" "),t.possiblePopulation?n("DnaMixerPopulation",{staticClass:"mt-3",attrs:{dataId:t.dataId,traits:t.traits,population:t.possiblePopulation},model:{value:t.populationVisible,callback:function(e){t.populationVisible=e},expression:"populationVisible"}}):t._e(),t._v(" "),n("PresaleChildren",{staticClass:"mt-3",attrs:{possibleChildrenDnas:t.possibleChildrenDnasWithMutation,dataId:t.dataId,traits:t.traits}})],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{DnaMixerPopulation:n(288).default,PresaleChildren:n(549).default})},545:function(t,e,n){"use strict";n.r(e);n(7),n(144),n(8),n(28),n(11),n(6),n(23),n(145),n(51),n(9);var o=n(10),r=n(0);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={data:function(){return{stoneCount:4,traitCount:6,noneChance:.3,moveChance:.4,moveBackChance:.3}},computed:{placeChance:function(){return Math.max(0,1-this.noneChance-this.moveChance-this.moveBackChance)},blocks:function(){for(var t=this,e=[{stones:[[0,0]],position:[0,0],chance:1,traits:[],mapping:{"0_0":!0},lastPosition:[0,0]}],n=0;e.length>0&&n<this.traitCount;)e=e.flatMap((function(e){return t.addTrait2(e)})),e=this.mergeChances(e),n++;var o={};e.forEach((function(t){var e=t.stones.length;o[e]=(o[e]||0)+1,o[e+"chance"]=(o[e+"chance"]||0)+t.chance})),console.log({counts:o,stoneChances:e});var r={};return Object.keys(o).sort().forEach((function(t){return r[t]=t.indexOf("chance")>-1?parseInt(1e5*o[t])/1e3+" %":o[t]})),r}},methods:{normalize:function(t){var e=t.stones.reduce((function(t,e){return[Math.min(t[0],e[0]),Math.min(t[1],e[1])]}),[0,0]);if(0==e[0]&&0==e[1])return c(c({},t),{},{normalized:!0});var n=t.stones.map((function(t){return[t[0]-e[0],t[1]-e[1]]})),o=t.position.map((function(t,n){return t-e[n]}));return c(c({},t),{},{stones:n,position:o,normalized:!0})},mergeChances:function(t){var e=this,n=[],o={};return t.forEach((function(t){t.normalized||(t=e.normalize(t));var r=t.position[0]+"_"+t.position[0]+"-"+t.stones.map((function(t){return t[0]+"_"+t[1]})).sort().join("-");o[r]?o[r].chance+=t.chance:(n.push(t),o[r]=t)})),n},addTrait:function(t){var e=[];return[!0,!1].forEach((function(n){[[0,0],[-1,0],[1,0],[0,1],[0,-1]].forEach((function(r,l){var d=Object(o.a)(t.stones),h=t.position.map((function(t,e){return t+r[e]})),f=c({},t.mapping);f[h[0]+"_"+h[1]]||(f[h[0]+"_"+h[1]]=!0,d.push(h)),e.push({stones:d,position:t.position.map((function(t,e){return t+(n?r[e]:0)})),chance:t.chance/10,traits:[].concat(Object(o.a)(t.traits),[(n?4:0)+l]),mapping:f})}))})),e},addTrait2:function(t){var e=this,n=[];return[1,0,-1,-2].forEach((function(r){[[-1,0],[1,0],[0,1],[0,-1]].forEach((function(l,d){var h=-1==r?[0,0]:l,f=Object(o.a)(t.stones),v=-2==r?t.lastPosition:t.position.map((function(t,e){return t+h[e]})),m=c({},t.mapping);m[v[0]+"_"+v[1]]||(m[v[0]+"_"+v[1]]=!0,f.push(v));var D=0;switch(r){case 1:D=e.moveChance;break;case 0:D=e.placeChance;break;case-1:D=e.noneChance;break;case-2:D=e.moveBackChance}var _=0;switch(d){case 0:_=.1875;break;case 1:_=.3125;break;case 2:_=.1875;break;case 3:_=.3125}n.push({stones:f,position:-2==r?t.lastPosition:t.position.map((function(t,e){return t+(1==r?h[e]:0)})),lastPosition:t.position,chance:t.chance*_*D,traits:[].concat(Object(o.a)(t.traits),[4*(r+1)+d]),mapping:m})}))})),n}}},h=n(56),component=Object(h.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("Block generator")]),t._v(" "),n("b-form-group",{attrs:{"label-cols":"auto","content-cols":"",label:"Trait Count"}},[n("b-input",{model:{value:t.traitCount,callback:function(e){t.traitCount=e},expression:"traitCount"}})],1),t._v(" "),n("b-form-group",{attrs:{"label-cols":"auto","content-cols":"",label:"noneChance"}},[n("b-input",{model:{value:t.noneChance,callback:function(e){t.noneChance=e},expression:"noneChance"}})],1),t._v(" "),n("b-form-group",{attrs:{"label-cols":"auto","content-cols":"",label:"moveChance"}},[n("b-input",{model:{value:t.moveChance,callback:function(e){t.moveChance=e},expression:"moveChance"}})],1),t._v(" "),n("b-form-group",{attrs:{"label-cols":"auto","content-cols":"",label:"moveBackChance"}},[n("b-input",{model:{value:t.moveBackChance,callback:function(e){t.moveBackChance=e},expression:"moveBackChance"}})],1),t._v(" "),n("label",[t._v("placeChance: "+t._s(this.placeChance))]),t._v(" "),n("pre",[t._v(t._s(JSON.stringify(t.blocks,null,2)))])],1)}),[],!1,null,null,null);e.default=component.exports},547:function(t,e,n){"use strict";n.r(e);n(3),n(8),n(28),n(11),n(6),n(51),n(20),n(5),n(29),n(19),n(458),n(9);var o=n(0),r=n(459);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={props:["dataId","startPopulation","matchings"],data:function(){return{visible:!1,visibleTable:!1,daysToBreed:5,populations:[],chartOptions:{hoverBorderWidth:20,legend:{display:!1}}}},watch:{visible:function(t){t&&this.populate()},startPopulation:{handler:"populate",deep:!0},matchings:{handler:"populate",deep:!0}},computed:{chartData:function(){var t=this;if(!this.populations.length)return{};var e=this.populations[this.populations.length-1].population,n=Object.keys(e),o=[],l=new r.BN("0");n.forEach((function(n){l=l.add(e[n]);var r=e[n],c=t.matchings[n],d="gray";c&&(d=c),o.push({key:c+"("+n+")",color:d,count:r})}));var c=(o=o.sort((function(a,b){return a.color<b.color?-1:a.color==b.color?0:1}))).map((function(a){return a.count})).map((function(t){return"0"==l.toString(10)?0:parseInt(t.mul(new r.BN("1000000")).div(l).toString(10))/1e4}));return{labels:o.map((function(a){return a.key})),datasets:[{label:"Data One",backgroundColor:this.$toColors(o.map((function(a){return a.color}))),data:c}]}},populationsSortedAndMatched:function(){var t=this;return this.populations.map((function(e){var n={day:e.round},o=new r.BN("0");for(var l in e.population)if(Object.hasOwnProperty.call(e.population,l)){var c=e.population[l],d=t.matchings[l];d||(d=l);l.split("--");n[d]?n[d]=n[d].add(c):n[d]=c,o=o.add(c)}for(var h in n)if(Object.hasOwnProperty.call(n,h)&&"day"!=h){var f=n[h],v="0"==o.toString(10)?new r.BN("0"):f.mul(new r.BN("1000000")).div(o);n[h+" %"]=parseInt(v.toString(10))/1e4;var m=f.toString(10);m.length>5&&(m=m.substring(0,1)+"."+m.substring(1,2)+"e"+(m.length-1)),n[h]=m}return n})).reverse()},chartDataLastSorted:function(){if(!this.populationsSortedAndMatched.length)return{};var data=this.populationsSortedAndMatched[0],t=Object.keys(data).filter((function(a){return a.indexOf("%")>-1})).sort(),e=[],n=[];return t.forEach((function(t){return e.push(data[t])})),t.forEach((function(t){return n.push(t.substring(0,t.length-2))})),console.log({keys:t,values:e,sorted:data}),{labels:t,datasets:[{label:"Data One",backgroundColor:this.$toColors(n),data:e}]}},chartDataFirstSorted:function(){if(!this.populationsSortedAndMatched.length)return{};var data=this.populationsSortedAndMatched[this.populationsSortedAndMatched.length-1],t=Object.keys(data).filter((function(a){return a.indexOf("%")>-1})).sort(),e=[],n=[];return t.forEach((function(t){return e.push(data[t])})),t.forEach((function(t){return n.push(t.substring(0,t.length-2))})),console.log({keys:t,values:e,sorted:data}),{labels:t,datasets:[{label:"Data One",backgroundColor:this.$toColors(n),data:e}]}}},methods:{populate:function(){if(this.visible){var t=c({},this.startPopulation);for(var e in this.startPopulation)if(Object.hasOwnProperty.call(this.startPopulation,e)){var n=this.startPopulation[e];t[e]=new r.BN(n+"")}var o=[];o.push({round:-1,population:c({},t)});for(var l=0;l<Math.min(10,this.daysToBreed);l++)t=this.nextDayOf(t),o.push({round:l,population:c({},t)});this.populations=o,console.log("this.populations",this.populations)}},nextDayOf:function(t){var e={},n=0,o=0;for(var l in t)if(Object.hasOwnProperty.call(t,l)){var c=t[l],d=l.split("--");for(var h in o=0,t)Object.hasOwnProperty.call(t,h)&&function(){var l=t[h],f=h.split("--");if(o>=n){var v=o==n?c.mul(c.sub(new r.BN("1"))).div(new r.BN("2")):c.mul(l);d.forEach((function(a){return f.forEach((function(b){var t=[a,b].sort().join("--");void 0!==e[t]?e[t]=e[t].add(v):e[t]=v}))}))}o++}();n++}return e}}},h=n(56),component=Object(h.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-row",[n("b-col",[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"population"+t.dataId,expression:"'population' + dataId"}],attrs:{variant:"primary"}},[t._v("\n      "+t._s(t.visible?"Hide":"Show")+" Population\n    ")])],1),t._v(" "),n("b-collapse",{staticClass:"mt-2 col-12",attrs:{id:"population"+t.dataId},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("b-row",[n("b-col",[n("label",[t._v("Days to breed (max 10)")])]),t._v(" "),n("b-col",[n("b-input",{attrs:{type:"number"},model:{value:t.daysToBreed,callback:function(e){t.daysToBreed=e},expression:"daysToBreed"}})],1),t._v(" "),n("b-col",[n("b-button",{on:{click:t.populate}},[t._v("Breed")])],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"4"}},[n("PieDiagram",{attrs:{chartData:t.chartDataFirstSorted,options:t.chartOptions}})],1),t._v(" "),n("b-col",{attrs:{cols:"4"}},[n("PieDiagram",{attrs:{chartData:t.chartDataLastSorted,options:t.chartOptions}})],1),t._v(" "),n("b-col",{attrs:{cols:"4"}},[n("PieDiagram",{attrs:{chartData:t.chartData,options:t.chartOptions}})],1)],1),t._v(" "),n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"populationTable"+t.dataId,expression:"'populationTable' + dataId"}],attrs:{variant:"outline-primary"}},[t._v("\n      "+t._s(t.visibleTable?"Hide":"Show")+" Data Table\n    ")]),t._v(" "),n("b-collapse",{staticClass:"mt-2 col-12",attrs:{id:"populationTable"+t.dataId},model:{value:t.visibleTable,callback:function(e){t.visibleTable=e},expression:"visibleTable"}},[n("b-table",{attrs:{striped:"",hover:"",items:t.populationsSortedAndMatched}})],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{PieDiagram:n(455).default})},548:function(t,e,n){"use strict";n.r(e);n(8),n(11),n(9);var o={props:["dna","traits","dnaDepth","showDnaDetails","dnaOffset"],computed:{dnaTraitList:function(){var t=this,e=void 0===this.dnaOffset?4:this.dnaOffset,n=[],o=0;return this.traits.forEach((function(r){for(var l={name:r.traitName,sequences:[]},c=0;c<e;c++){var d=[t.dna.dna1[o+c],t.dna.dna2[o+c]].sort().join("--");l.sequences.push({id:r.id,matching:r.matchings[d],sequence:d})}n.push(l),o+=e})),n}}},r=(n(534),n(56)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{class:{"small-font":!!t.dna.chance}},[t.dna.chance?n("b-row",[n("b-col",{attrs:{cols:"auto"}},[t._v("\n      Chance: "+t._s(100*t.dna.chance)+"%\n      ")])],1):t._e(),t._v(" "),t._l(t.dnaTraitList,(function(e){return n("b-row",{key:e.id},[n("b-col",{attrs:{cols:"auto"}},[n("b",[t._v(t._s(e.name))])]),t._v(" "),n("b-col",{staticClass:"ml-auto text-right font-bold",attrs:{cols:"auto"}},[t._l(e.sequences,(function(e,o){return[0==o?n("div",{key:o},[n("b",[t._v("\n            "+t._s(e.matching)+"\n          ")]),t._v(" "),t.showDnaDetails?n("span",{staticClass:"full-sequence"},[t._v("\n            ("+t._s(e.sequence)+")\n          ")]):t._e()]):t.dnaDepth&&t.dnaDepth>o?n("div",{key:o},[t._v("\n          "+t._s(e.matching)+"\n          "),t.showDnaDetails?n("span",{staticClass:"full-sequence"},[t._v("\n            ("+t._s(e.sequence)+")\n          ")]):t._e()]):t._e()]}))],2)],1)}))],2)}),[],!1,null,"a39fd2f6",null);e.default=component.exports},549:function(t,e,n){"use strict";n.r(e);n(7),n(3),n(103),n(8),n(6),n(23),n(24),n(51),n(9);var o=n(10),r={props:["dataId","possibleChildrenDnas","traits"],data:function(){return{filterSelection:{}}},created:function(){var t={};this.traits.forEach((function(e){return t[e.traitName]=null})),this.filterSelection=t},computed:{possibleChildrenCount:function(){return this.possibleChildrenDnas.reduce((function(p,t){return p+t.length}),0)},filteredChance:function(){return this.possibleChildrenFiltered.map((function(t){var e=t.traitsChances,n=t.factor;return 100*e.reduce((function(p,t){return p*t.reduce((function(t,e){return t+e.chance}),0)}),1)*n})).reduce((function(t,e){return t+e}),0)},possibleChildrenFiltered:function(){var t=this;return this.possibleChildrenDnas.map((function(e){var n=e.traitsChances,o=e.factor,r=[],l=(new Date).getTime();return t.traits.forEach((function(e,o){var filter=t.filterSelection[e.traitName];filter?r.push(n[o].filter((function(t){return t.traits[0]==filter}))):r.push(n[o])})),console.log("possible filtered dnas calculated in "+((new Date).getTime()-l)/1e3+" seconds",r),{traitsChances:r,factor:o}}))},possibleChildrenFilteredCount:function(){return this.possibleChildrenFiltered.map((function(t){return t.traitsChances.reduce((function(t,e){return t*e.length}),1)})).reduce((function(t,e){return t+e}),0)},possibleFilter:function(){var t=this,e={},n=(new Date).getTime();return console.log(this.possibleChildrenDnas),this.possibleChildrenDnas.forEach((function(n){var o=n.traitsChances,r=n.factor;o.forEach((function(n,o){var l=t.traits[o].traitName;void 0===e[l]&&(e[l]=[]),n.forEach((function(t){var n=t.traits[0],o=e[l].find((function(s){return s.name==n}));o?o.count+=100*t.chance*r:e[l].push({name:n,count:100*t.chance*r})}))}))})),console.log("possible filter",e),e=Object.keys(e).map((function(t){return{title:t,options:[{value:null,text:"all",chance:-1}].concat(Object(o.a)(e[t].map((function(a){return{value:a.name,text:a.name+"("+a.count+" %)",chance:a.count}})))).sort((function(a,b){return a.chance-b.chance}))}})),console.log("possible filtered dnas calculated in "+((new Date).getTime()-n)/1e3+" seconds",e),e}}},l=n(56),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.possibleChildrenDnas?n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("h3",[t._v("\n      Children "+t._s(t.possibleChildrenCount)+" ("+t._s(t.possibleChildrenFilteredCount)+"\n      - "+t._s(t.filteredChance)+" %)\n    ")])]),t._v(" "),n("b-col",{attrs:{cols:"12"}},[n("b-row",t._l(t.possibleFilter,(function(filter,e){return n("b-col",{key:filter.title+e,attrs:{cols:"4"}},[n("b-form-group",{attrs:{"label-cols":"auto","content-cols":"",label:filter.title}},[n("b-select",{attrs:{options:filter.options},model:{value:t.filterSelection[filter.title],callback:function(e){t.$set(t.filterSelection,filter.title,e)},expression:"filterSelection[filter.title]"}})],1)],1)})),1)],1)],1):t._e()}),[],!1,null,null,null);e.default=component.exports},551:function(t,e,n){"use strict";n.r(e);n(103),n(66);var o=n(26),r={data:function(){return{defaultTraitData:this.$defaultData.traits||[],defaultDnaData:this.$defaultData.dnas||[],defaultMixerData:this.$defaultData.mixer||[],defaultMutationsData:this.$defaultData.mutations||[],defaultPresaleData:this.$defaultData.presale||[]}},asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,d,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params,o=t.$db,r=t.$dna,l=n.slug,c=n.slug,(d=o.loadAllDataFromCookies("project"))&&(h=d.find((function(p){return p.dataName==l})))&&(l=h.id),r.reload(l),e.abrupt("return",{slug:l,projectName:c});case 7:case"end":return e.stop()}}),e)})))()}},l=(n(456),n(56)),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container py-4"},[n("b-row",[n("b-col",[n("h1",{staticClass:"title pb-3"},[t._v("Breeder - "+t._s(t.projectName))])]),t._v(" "),n("b-col",{attrs:{cols:"auto"}},[n("Settings",{attrs:{defaultData:t.$defaultData}})],1)],1),t._v(" "),n("b-tabs",{attrs:{"content-class":"mt-3",lazy:""}},[n("b-tab",{attrs:{title:"Traits",active:""}},[n("CookieSavedList",{attrs:{dataName:"Trait",dataKey:t.slug+"-trait",defaultData:t.defaultTraitData},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.dataId,r=e.value,l=e.save,c=e.remove,d=e.refName;return[n("Trait",{ref:d,attrs:{dataId:o,value:r,slug:t.slug},on:{save:l,remove:c}})]}}])})],1),t._v(" "),n("b-tab",{attrs:{title:"DNA"}},[n("CookieSavedList",{attrs:{dataName:"DNA",dataKey:t.slug+"-dna",defaultData:t.defaultDnaData},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.dataId,r=e.value,l=e.save,c=e.remove,d=e.refName;return[n("SpawnDna",{ref:d,attrs:{dataId:o,value:r,slug:t.slug},on:{save:l,remove:c}})]}}])})],1),t._v(" "),n("b-tab",{attrs:{title:"DNA Mixer"}},[n("CookieSavedList",{attrs:{dataName:"DNA Mixer",dataKey:t.slug+"-dnaMixer",defaultData:t.defaultMixerData},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.dataId,r=e.value,l=e.save,c=e.remove,d=e.refName;return[n("DnaMixer",{ref:d,attrs:{dataId:o,value:r,slug:t.slug},on:{save:l,remove:c}})]}}])})],1),t._v(" "),n("b-tab",{attrs:{title:"Mutations"}},[n("CookieSavedList",{attrs:{dataName:"Mutations",dataKey:t.slug+"-mutations",defaultData:t.defaultMutationsData},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.dataId,r=e.value,l=e.save,c=e.remove,d=e.refName;return[n("Mutations",{ref:d,attrs:{dataId:o,value:r,slug:t.slug},on:{save:l,remove:c}})]}}])})],1),t._v(" "),n("b-tab",{attrs:{title:"Presale"}},[n("CookieSavedList",{attrs:{dataName:"Presale",dataKey:t.slug+"-presale",defaultData:t.defaultPresaleData},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.dataId,r=e.value,l=e.save,c=e.remove,d=e.refName;return[n("Presale",{ref:d,attrs:{dataId:o,value:r,slug:t.slug},on:{save:l,remove:c}})]}}])})],1),t._v(" "),n("b-tab",{attrs:{title:"Blocks"}},[n("Blocks")],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Settings:n(286).default,Trait:n(540).default,CookieSavedList:n(287).default,SpawnDna:n(541).default,DnaMixer:n(542).default,Mutations:n(543).default,Presale:n(544).default,Blocks:n(545).default})}}]);